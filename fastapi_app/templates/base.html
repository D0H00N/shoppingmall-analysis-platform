<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="https://cdn-icons-png.freepik.com/512/16866/16866002.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ëŒ€ì‹œë³´ë“œ{% endblock %}</title>
    <style>
        @keyframes moveBackground {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: url("https://preview.redd.it/abstract-colorful-wallpaper-7680x2160-v0-9w5i20l6m88d1.jpeg?auto=webp&s=8b7ebdedda1d54af4e665db2935a42b17e0a80e9") no-repeat center center fixed;
            background-size: cover;
            animation: moveBackground 670s linear infinite;
            transform-origin: center top;  /* ğŸ”¥ 20ì´ˆ ë™ì•ˆ ë¶€ë“œëŸ½ê²Œ ì´ë™ */
        }

        
        /* âœ… í—¤ë” ê³ ì • */
        #header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background-color: #fafafae8;
            color: rgb(58, 58, 58);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 1000;
            white-space: nowrap;
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3);
        }
        .header-expand {
            position: fixed;  /* âœ… fixedë¡œ ë³€ê²½í•˜ì—¬ í•­ìƒ í™”ë©´ì— ê³ ì • */ /* âœ… í•­ìƒ ìµœìƒë‹¨ì— ìœ ì§€ */
            top: 70px;
            left: 0;
            width: 100%;
            background: rgba(250, 250, 250, 0.95);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            max-height: none; /* âœ… ë†’ì´ ì¦ê°€ */
            transition: max-height 0.4s ease-in-out, opacity 0.3s ease-in-out;
            opacity: 1; /* âœ… ê¸°ë³¸ì ìœ¼ë¡œ ë³´ì´ê²Œ ì„¤ì • */
            z-index: 3000; /* âœ… ë‹¤ë¥¸ ìš”ì†Œë³´ë‹¤ ë¬´ì¡°ê±´ ìœ„ì— ì˜¤ë„ë¡ ì„¤ì • */
        }
        
        
        
        .header-content {
            padding: 20px;
            display: none;  /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
            text-align: center;
        }
    
        /* âœ… í™•ì¥ ì‹œ ì• ë‹ˆë©”ì´ì…˜ */
        .expand-active {
            max-height: 10-00px;
            opacity: 1;
        }
        .closing {
            animation: slideUp 0.3s ease-in-out;
        }
        /* âœ… ë¡œê³  */
        #header .logo img {
            height: 45px;
        }

        /* âœ… ë„¤ë¹„ê²Œì´ì…˜ */
        #header nav {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-grow: 1;
            justify-content: flex-start; /* ğŸ”¥ ë²„íŠ¼ ì¤‘ì•™ ì •ë ¬ */
            margin-left: 28px; /* ğŸ”¥ ë¡œê³ ì™€ ê°„ê²© í™•ë³´ */
        }
        
        #header nav .menu {
            display: block; /* ğŸ”¥ ê°•ì œ í‘œì‹œ */
            font-weight: bold;
            cursor: pointer;
            color: black; /* ğŸ”¥ ê¸€ììƒ‰ ë³€ê²½ */
            transition: 0.3s;
        }
        #header nav .menu:hover {
            background-color: #ddd;
        }

        /* âœ… ê²€ìƒ‰ì°½ ìŠ¤íƒ€ì¼ */
        .search-container {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-grow: 1;
            justify-content: flex-end;  /* ğŸ”¥ ê¸°ì¡´ center â†’ flex-start */
            margin-right: 85px;
        }

        #header input {
            width: 392px; /* ê¸°ì¡´ 280px * 1.4 = 392px */
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            background-color: #4d4d4d;
            color: white;
            font-size: 14px;
            outline: none;
        }
        /* âœ… ê²€ìƒ‰ ë²„íŠ¼ */
        .search-btn {
            background: #5a5a5a;
            color: white;
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .credit-cost {
            font-size: 12px;
            color: #ccc;
            font-weight: normal;
        }
        .search-btn:hover {
            background: #444;
        }

        /* âœ… ìš°ì¸¡ ê³ ì • ë°•ìŠ¤ (ë’¤ë¡œê°€ê¸° & ê²€ìƒ‰ ê¸°ë¡) */
        #side-panel {
            position: fixed;
            right: 8px;
            top: 18%;
            width: 120px; /* ê¸°ì¡´ 101pxì—ì„œ ì•½ê°„ ë„“ê²Œ ì¡°ì • */
            background-color: #fafafae8;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            z-index: 1000;
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3);
        }
        .current-mall {
            font-size: 12px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        .mall-name {
            color: #8a4af3; /* ë³´ë¼ìƒ‰ìœ¼ë¡œ ê°•ì¡° */
        }
        .side-button:hover {
            background-color: #999;
        }
        .side-button {
            background-color: #bbb;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            margin-bottom: 10px;
        }

        /* âœ… ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
        #back-box {
            background-color: #5a5a5a;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            margin-bottom: 10px;
        }
        #back-box:hover {
            background-color: #999;
        }

        /* âœ… ê²€ìƒ‰ ê¸°ë¡ */
        #search-history {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px; /* ì´ë¯¸ì§€ ê°„ ê°„ê²© ì¦ê°€ */
        }

        .history-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        /* âœ… ê²€ìƒ‰ ê¸°ë¡ ì´ë¯¸ì§€ í¬ê¸° í™•ëŒ€ */
        .search-item {
            width: 100px; /* ê¸°ì¡´ 88pxì—ì„œ ë” í¬ê²Œ */
            height: 100px;
            border-radius: 10px; /* ë” ë¶€ë“œëŸ¬ìš´ ëª¨ì„œë¦¬ */
            cursor: pointer;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            object-fit: cover;
            border: 1px solid #ddd; /* í…Œë‘ë¦¬ ì¶”ê°€ë¡œ ê¹”ë”í•œ ëŠë‚Œ */
        }
        .search-item:hover {
            transform: scale(1.1); /* í˜¸ë²„ ì‹œ ë” í¬ê²Œ í™•ëŒ€ */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* í˜¸ë²„ ì‹œ ê·¸ë¦¼ì íš¨ê³¼ ì¶”ê°€ */
        }
        /* âœ… ì»¨í…ì¸  */
        #content {
            margin-top: 80px; /* âœ… í—¤ë” ë†’ì´(70px)ë³´ë‹¤ ì‚´ì§ ì—¬ìœ  */
            padding: 20px;
            width: 90%;
            min-height: 100vh;
        }

        /* ìŠ¬ë¼ì´ë“œ íš¨ê³¼ ê¸°ë³¸ ì„¤ì • */
        .page-transition {
            position: fixed;
            width: 100%;
            height: 100%;
            background-color: white;  /* ğŸ”¥ ë°°ê²½ì„ ìœ ì§€í•´ì„œ í™•ì‹¤í•œ íš¨ê³¼ */
            z-index: 9999;
            top: 0;
            left: 0;
            transform: translateX(0);
            opacity: 1;
            transition: transform 1.2s ease-in-out, opacity 1s ease-in-out; /* âœ… ë” ë¶€ë“œëŸ½ê²Œ */
        }
        
        /* âœ… ì™¼ìª½ìœ¼ë¡œ ì´ë™í•˜ëŠ” íš¨ê³¼ */
        .slide-out-left {
            transform: translateX(-100%);
            opacity: 0;  /* ğŸ”¥ ì ì  ì‚¬ë¼ì§€ëŠ” íš¨ê³¼ */
        }
        
        /* âœ… ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•˜ëŠ” íš¨ê³¼ */
        .slide-out-right {
            transform: translateX(100%);
            opacity: 0;  /* ğŸ”¥ ì ì  ì‚¬ë¼ì§€ëŠ” íš¨ê³¼ */
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            backdrop-filter: blur(10px); /* ğŸ”¥ ë¸”ëŸ¬ íš¨ê³¼ */
            background: rgba(255, 255, 255, 0.43); /* ë°˜íˆ¬ëª… ë°°ê²½ */
            z-index: 10000; /* ğŸ”¥ ìµœìƒë‹¨ ë°°ì¹˜ */
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 1s ease-in-out;
        }
        
        /* âœ… "ë¶„ì„ ì¤‘..." í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .loading-text {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            text-align: center;
            animation: loadingMove 1.5s infinite alternate ease-in-out;
        }
        
        /* âœ… "ë¶„ì„ ì¤‘..."ì´ ìœ„ì•„ë˜ë¡œ ì‚´ì§ ì›€ì§ì´ëŠ” íš¨ê³¼ */
        @keyframes loadingMove {
            0% {
                transform: translateY(-5px);
            }
            100% {
                transform: translateY(5px);
            }
        }
        
        /* âœ… í˜ì´ì§€ ë¡œë“œ í›„ ë¸”ëŸ¬ íš¨ê³¼ ì œê±° */
        .fade-out {
            opacity: 0;
            pointer-events: none; /* ë§ˆìš°ìŠ¤ í´ë¦­ ë°©ì§€ í•´ì œ */
        }

        .logo-container {
            display: flex;
            align-items: center;
            text-decoration: none; /* ë°‘ì¤„ ì œê±° */
            gap: 10px; /* ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ ì‚¬ì´ ì—¬ë°± */
        }
        
        .logo-container img {
            height: 40px; /* ì•„ì´ì½˜ í¬ê¸° ì¡°ì • */
        }
        
        .logo-container span {
            font-size: 20px;
            font-weight: bold;
            color: black; /* ê¸€ììƒ‰ */
        }
        .footer-credit {
            position: fixed;
            bottom: 5px;
            right: 10px;
            font-size: 15px;
            color: #ffffff;
        }

        .team-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        
        .team-member {
            display: flex;
            align-items: center;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
            width: auto; /* âœ… ë‚´ìš©ì— ë”°ë¼ ìë™ ì¡°ì ˆ */
            max-width: 350px; /* âœ… ë„ˆë¬´ ë„“ì–´ì§€ì§€ ì•Šë„ë¡ ì œí•œ */
            min-width: 280px; /* âœ… ìµœì†Œ í¬ê¸° ì§€ì • */
            flex: 1; /* âœ… ëª¨ë“  ë°•ìŠ¤ê°€ ê· ë“±í•œ í¬ê¸°ë¡œ ì¡°ì ˆ */
        }
        
        .team-member img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-right: 15px;
        }
        .team-member .info {
            text-align: left;
        }
        
        .team-member .info h4 {
            margin: 0 0 5px;
        }
        
        .team-member .info a {
            text-decoration: none;
            color: #007BFF;
            font-weight: bold;
        }
        
        .team-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center; /* âœ… ê°€ìš´ë° ì •ë ¬ */
            align-items: stretch; /* âœ… ëª¨ë“  ë°•ìŠ¤ ë†’ì´ ê· ì¼í•˜ê²Œ ì¡°ì • */
            max-width: 800px; /* âœ… ë‚´ìš©ì´ ë„ˆë¬´ í¼ì§€ì§€ ì•Šë„ë¡ */
            margin: 0 auto; /* âœ… ì „ì²´ ì¤‘ì•™ ì •ë ¬ */
        }
        
        @media screen and (max-width: 768px) {
            .team-grid {
                grid-template-columns: repeat(2, 1fr); /* âœ… ì‘ì€ í™”ë©´ì—ì„œë„ 2x2 ìœ ì§€ */
            }
        }

        .model-grid {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .model-card {
            display: flex;
            align-items: center;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
            width: 40%;
            max-width: 380px;
        }
        
        .model-card img {
            width: 80px;
            height: 80px;
            margin-right: 15px;
        }
        
        .model-card .info {
            text-align: left;
        }
        
        .model-card .info h4 {
            margin: 0 0 5px;
            font-size: 18px;
        }
        
        .model-card .info p {
            margin: 2px 0;
            font-size: 14px;
        }

        @keyframes slideDown {
            from { transform: translateY(-10px); opacity: 0.5; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* âœ… ì°½ ì˜¬ë¼ê°ˆ ë•Œ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes slideUp {
            from { transform: translateY(0); opacity: 1; }
            to { transform: translateY(-10px); opacity: 0.5; }
        }
        /* âœ… ì•Œë¦¼ ì•„ì´ì½˜ ì»¨í…Œì´ë„ˆ */
        .notification-container {
            position: relative;
            margin-left: 10px;  /* ğŸ”¥ ê²€ìƒ‰ ë²„íŠ¼ê³¼ ê°„ê²© */
            cursor: pointer;
        }

        /* âœ… ì•Œë¦¼ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
        .notification-icon {
            font-size: 22px;
            position: relative;
            color: black;
            transition: 0.3s;
        }

        .notification-icon:hover {
            color: red; /* ğŸ”¥ ì•Œë¦¼ ì•„ì´ì½˜ í˜¸ë²„ ì‹œ ê°•ì¡° */
        }

        /* âœ… ì•Œë¦¼ ê°œìˆ˜ ë°°ì§€ (ë¹¨ê°„ìƒ‰ ì›) */
        .badge {
            background-color: red;
            color: white;
            border-radius: 50%;
            padding: 4px 7px;
            font-size: 12px;
            font-weight: bold;
            position: absolute;
            top: -5px;
            right: -10px;
            display: none;
        }

        /* âœ… ì•Œë¦¼ ë¦¬ìŠ¤íŠ¸ ë“œë¡­ë‹¤ìš´ */
        .notification-dropdown {
            display: none;
            position: absolute;
            top: 30px;
            right: 0;
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            width: 260px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            border-radius: 8px;
        }

        .notification-dropdown ul {
            list-style: none;
            padding: 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .notification-dropdown ul li {
            padding: 8px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            cursor: pointer;
        }

        .notification-dropdown ul li:hover {
            background-color: #f5f5f5;
        }

        .notification-dropdown ul li:last-child {
            border-bottom: none;
        }

        .notification-dropdown button {
            width: 100%;
            padding: 8px;
            background: #5a5a5a;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 8px;
        }

        .notification-dropdown button:hover {
            background: #444;
        }

        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            width: 280px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 2000;
            max-height: 200px; /* ìµœëŒ€ ë†’ì´ë¥¼ 5ê°œ í•­ëª©ì— ë§ê²Œ ì„¤ì • */
            overflow-y: auto;
            display: none;
        }
        
        .search-suggestions div {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis; /* ê¸´ í…ìŠ¤íŠ¸ëŠ” ...ìœ¼ë¡œ í‘œì‹œ */
        }
        
        .search-suggestions div:hover {
            background-color: #f5f5f5;
        }
        
        .search-suggestions div:last-child {
            border-bottom: none;
        }

        #header input {
            width: 392px; /* ê¸°ì¡´ 280px * 1.4 = 392px */
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            background-color: #4d4d4d;
            color: white;
            font-size: 14px;
            outline: none;
        }
        
        /* ìŠ¤ìœ„ì¹˜ ìŠ¤íƒ€ì¼ */
        .search-switch {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-right: 10px;
        }
        
        .switch-label {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #a676f1;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        /* ë¶„ì„ ë²„íŠ¼ê³¼ 00credit ìŠ¤íƒ€ì¼ */
        .search-btn-container {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .credit-text {
            font-size: 12px;
            color: #666;
            font-weight: normal;
        }
        
        /* ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .auth-btn {
            background: #666; /* íšŒìƒ‰ í†¤ìœ¼ë¡œ ë³€ê²½ */
            color: white;
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            margin-left: 10px;
        }
        
        .auth-btn:hover {
            background: #555; /* ì¡°ê¸ˆ ë” ì–´ë‘ìš´ íšŒìƒ‰ */
        }
    </style>    
</head>
<body>

    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-text">ğŸ“Š ë¶„ì„ ì¤‘..</div>
    </div>

    <!-- âœ… í—¤ë” -->
    <div id="header">
        <div class="logo">
            <a href="http://15.152.242.221:8000/dashboard/index/" class="logo-container">
                <img src="https://cdn-icons-png.freepik.com/512/16866/16866002.png" alt="BossMonitor Logo">
                <span>BossMonitor</span>
            </a>
        </div>
    
        <nav>
            <div class="menu" onclick="toggleSection('performance-content', this)">
                ëª¨ë¸ ì„±ëŠ¥ <span class="arrow">â–¼</span>
            </div>
            <div class="menu" onclick="toggleSection('team-content', this)">
                íŒ€ ë©¤ë²„ <span class="arrow">â–¼</span>
            </div>
        </nav>
    
        <div class="search-container">
            <!-- ìŠ¤ìœ„ì¹˜ -->
            <div class="search-switch">
                <span class="switch-label">ì‡¼í•‘ëª°</span>
                <label class="switch">
                    <input type="checkbox" id="search-mode-switch">
                    <span class="slider round"></span>
                </label>
                <span class="switch-label">ì œí’ˆ</span>
            </div>
    
            <!-- ê²€ìƒ‰ì°½ -->
            <div style="position: relative;">
                <input type="text" id="header-search-id" placeholder="ì œí’ˆ ID ë˜ëŠ” ì œí’ˆëª… ì…ë ¥">
                <div id="search-suggestions" class="search-suggestions"></div>
            </div>
    
            <!-- ë¶„ì„ ë²„íŠ¼ (í¬ë ˆë”§ í¬í•¨) -->
            <button class="search-btn" onclick="searchFromHeader()">
                ë¶„ì„ <span class="credit-cost">ğŸ’° 100</span>
            </button>
    
            <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ -->
            <button class="auth-btn">ë¡œê·¸ì¸/íšŒì›ê°€ì…</button>
        </div>
    
        <div class="footer-credit">
            made by ì¼ì¡°(ä¸€åŠ©)
        </div>
    </div>
    
    <!-- âœ… í™•ì¥ ì»¨í…ì¸  (í—¤ë” ë°–ì— ì¡´ì¬) -->
    <div id="header-expand" class="header-expand">
        <div id="performance-content" class="header-content">
            <h3>ğŸ“Š ëª¨ë¸ ì„±ëŠ¥</h3>
        
            <div class="model-grid">
                <!-- âœ… í† í”½ ë¶„ë¥˜ ëª¨ë¸ -->
                <div class="model-card">
                    <img src="https://cdn-icons-png.freepik.com/512/2980/2980560.png" alt="BERT" class="model-img">
                    <div class="info">
                        <h4>KLUE-BERT (í† í”½ ë¶„ë¥˜ ëª¨ë¸)</h4>
                        <p><strong>ë¶ˆìš©ì–´ì²˜ë¦¬ + í‚¤ì›Œë“œ ì‚¬ì „ì„ í†µí•œ ë¼ë²¨ë§ ë°ì´í„°ë¡œ íŒŒì¸ íŠœë‹</strong></p>
                        <p><strong>Test Acc:</strong> 0.9594</p>
                        <p><strong>Test F1:</strong> 0.9920</p>
                    </div>
                </div>
        
                <!-- âœ… ê°ì„± ë¶„ì„ ëª¨ë¸ -->
                <div class="model-card">
                    <img src="https://cdn-icons-png.freepik.com/512/2980/2980560.png" alt="Sentiment Model" class="model-img">
                    <div class="info">
                        <h4>KoBERT (ê°ì„± ë¶„ì„ ëª¨ë¸)</h4>
                        <p><strong>Google Cloud NLP + ChatGPT ê¸°ë°˜ ë¼ë²¨ë§ ë°ì´í„°ë¡œ íŒŒì¸íŠœë‹</strong></p>
                        <p><strong>Test Acc:</strong> 0.93</p>
                        <p><strong>Test F1:</strong> 0.93</p>
                        <p><strong>ë¶€ì • ì •í™•ë„:</strong> 97%</p>
                        <p><strong>ì¤‘ë¦½ ì •í™•ë„:</strong> 89% (ê°€ì¥ ë‚®ìŒ)</p>
                    </div>
                </div>
            </div>
        </div>
        
    
        <div id="team-content" class="header-content">
            <h3>ğŸ‘¥ íŒ€ ë©¤ë²„</h3>
            <p><strong>íŒ€ ì´ë¦„:</strong> ì¼ì¡°(ä¸€åŠ©) [2025ë…„ 1ì›” 23ì¼ ~ 2025ë…„ 3ì›” 28ì¼]</p>
        
            <div class="team-grid">
                <div class="team-member">
                    <img src="https://png.pngtree.com/png-vector/20220424/ourmid/pngtree-retro-gentleman-avatar-portrait-profile-picture-icon-avatar-beard-portrait-vector-png-image_27826114.png" alt="ì´ë„í›ˆ">
                    <div class="info">
                        <h4>ì´ë„í›ˆ</h4>
                        <p><strong>ì—­í• :</strong> ë¦¬ë”, ë°ì´í„° ë¶„ì„, ëª¨ë¸ í•™ìŠµ, ì›¹ ê°œë°œ</p>
                        <p><strong>ì´ë©”ì¼:</strong> datahoons@gmail.com</p>
                        <p><strong>ëª©í‘œ:</strong> ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸,ì—”ì§€ë‹ˆì–´</p>
                        <a href="https://github.com/D0H00N" target="_blank" rel="noopener noreferrer">ë„í›ˆì˜ GitHub</a>
                    </div>
                </div>

                <div class="team-member">
                    <img src="https://png.pngtree.com/png-vector/20220424/ourmid/pngtree-retro-gentleman-avatar-portrait-profile-picture-icon-hipster-profile-gentleman-vector-png-image_27826122.png" alt="ê°•ëŒ€ì›…">
                    <div class="info">
                        <h4>ê°•ëŒ€ì›…</h4>
                        <p><strong>ì—­í• :</strong> ê°œë°œí™˜ê²½ êµ¬ì¶•, ëª¨ë¸ í•™ìŠµ, ì›¹ ê°œë°œ</p>
                        <p><strong>ì´ë©”ì¼:</strong> daewonng12@gmail.com</p>
                        <p><strong>ëª©í‘œ:</strong> ë°ì´í„° ì—”ì§€ë‹ˆì–´</p>
                        <a href="https://github.com/daewoong12" target="_blank" rel="noopener noreferrer">ëŒ€ì›…ì˜ GitHub</a>
                    </div>
                </div>
        
                <div class="team-member">
                    <img src="https://static.vecteezy.com/system/resources/previews/019/896/008/non_2x/male-user-avatar-icon-in-flat-design-style-person-signs-illustration-png.png" alt="ê°•ë¯¼ì„±">
                    <div class="info">
                        <h4>ê°•ë¯¼ì„±</h4>
                        <p><strong>ì—­í• :</strong> ì‚°ì¶œë¬¼ ê´€ë¦¬, ë°ì´í„° í¬ë¡¤ë§, ëª¨ë¸ í•™ìŠµ, ì›¹ ê°œë°œ</p>
                        <p><strong>ì´ë©”ì¼:</strong> kangms3158@gmail.com</p>
                        <p><strong>ëª©í‘œ:</strong> ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸</p>
                        <a href="https://github.com/mansung1" target="_blank" rel="noopener noreferrer">ë¯¼ì„±ì˜ GitHub</a>
                    </div>
                </div>
        
                <div class="team-member">
                    <img src="https://cdn1.iconfinder.com/data/icons/avatars-1-5/136/87-512.png" alt="ê¹€ì—°ì£¼">
                    <div class="info">
                        <h4>ê¹€ì—°ì£¼</h4>
                        <p><strong>ì—­í• :</strong> WBSê´€ë¦¬, ë°ì´í„° ë¶„ì„, ëª¨ë¸ í•™ìŠµ, ì›¹ ê°œë°œ</p>
                        <p><strong>ì´ë©”ì¼:</strong> yjj8790@gmail.com</p>
                        <p><strong>ëª©í‘œ:</strong> ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸</p>
                        <a href="https://github.com/kim-yeonjoo" target="_blank" rel="noopener noreferrer">ì—°ì£¼ì˜ GitHub</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <!-- âœ… ìš°ì¸¡ ê³ ì • íŒ¨ë„ (ë’¤ë¡œê°€ê¸° & ê²€ìƒ‰ ê¸°ë¡) -->
    <div id="side-panel">
        <!-- í˜„ì¬ ë¶„ì„ì¤‘ì¸ ì‡¼í•‘ëª° í‘œì‹œ -->
        <div class="current-mall">
            ì‡¼í•‘ëª°: <span class="mall-name"> ë¬´ì‹ ì‚¬</span>
        </div>
    
        <div class="side-button" onclick="window.location.href='http://15.152.242.221:8000/dashboard/index/'">
            ë©”ì¸í™”ë©´
        </div>
        <div class="side-button" onclick="history.back();">ë’¤ë¡œê°€ê¸°</div>
        <div class="history-title">ê²€ìƒ‰ ê¸°ë¡</div>
        <div id="search-history"></div>
    </div>

    <!-- âœ… ì»¨í…ì¸  -->
    <div id="content">
        {% block content %}
        <h2>í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h2>
        {% endblock %}
    </div>


    <script>
        let searchHistory = JSON.parse(localStorage.getItem("searchHistory")) || [];
    
        function searchFromHeader() {
            let productId = document.getElementById("header-search-id").value.trim();
            if (!productId) {
                alert("âŒ ì œí’ˆ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
                return;
            }
    
            console.log(`ğŸ” [searchFromHeader] ê²€ìƒ‰ ìš”ì²­: ${productId}`);
    
            // âœ… ê²€ìƒ‰ ê¸°ë¡ ì¶”ê°€ í›„ ì €ì¥
            storeSearchedProduct({ product_id: productId });
    
            // âœ… í˜„ì¬ í˜ì´ì§€ì˜ URLì„ ê²€ìƒ‰ IDë¡œ ë³€ê²½ í›„ ìƒˆë¡œê³ ì¹¨
            window.location.href = `/strength-weakness.html?product_id=${productId}`;
        }
    
        function storeSearchedProduct(productData) {
            if (!productData || !productData.product_id) return;
        
            let imageUrl = productData.image_url;
            if (!imageUrl || imageUrl.includes("undefined") || imageUrl.includes("null") || imageUrl === "") {
                console.warn(`ğŸš¨ [storeSearchedProduct] ì´ë¯¸ì§€ URLì´ ì—†ìŒ! ê¸°ë³¸ê°’ ì ìš©`);
                imageUrl = "https://rahulindesign.websites.co.in/twenty-nineteen/img/defaults/product-default.png";
            }
        
            console.log(`ğŸ–¼ï¸ [storeSearchedProduct] ì €ì¥ëœ ì´ë¯¸ì§€ URL: ${imageUrl}`);
        
            let productInfo = {
                id: productData.product_id,
                name: productData.product_name || "ì•Œ ìˆ˜ ì—†ìŒ",
                img: imageUrl
            };
        
            // ì¤‘ë³µ ì œê±° í›„ ê²€ìƒ‰ ê¸°ë¡ ì¶”ê°€
            searchHistory = searchHistory.filter(item => item.id !== productData.product_id);
            searchHistory.unshift(productInfo);
            if (searchHistory.length > 6) searchHistory.pop(); // ìµœëŒ€ 7ê°œë¡œ ë³€ê²½
        
            localStorage.setItem("searchHistory", JSON.stringify(searchHistory));
            console.log(`ğŸ“Œ [storeSearchedProduct] ì €ì¥ëœ ê²€ìƒ‰ ê¸°ë¡:`, searchHistory);
        
            updateSearchHistory();
        }
    
        function updateSearchHistory() { 
            let historyBox = document.getElementById("search-history");
        
            console.log(`ğŸ“Œ [updateSearchHistory] í˜„ì¬ ê²€ìƒ‰ ê¸°ë¡:`, searchHistory);
        
            historyBox.innerHTML = searchHistory.map((item, index) => {
                console.log(`ğŸ–¼ï¸ [updateSearchHistory] ì´ë¯¸ì§€ URL ì ìš©: ${item.img}`);
        
                return `
                    <img src="${item.img}" class="search-item fade-in" 
                        onerror="handleImageError(this, '${item.id}')"
                        onclick="searchByHistory('${item.id}')"
                        id="search-item-${index}">
                `;
            }).join("");
        
            console.log(`ğŸ“Œ [updateSearchHistory] ì—…ë°ì´íŠ¸ ì™„ë£Œ`);
        }

        function removeSearchItem(index) {
            let item = document.getElementById(`search-item-${index}`);
            if (item) {
                item.classList.add("fade-out");
                setTimeout(() => {
                    searchHistory.splice(index, 1);
                    localStorage.setItem("searchHistory", JSON.stringify(searchHistory));
                    updateSearchHistory();
                }, 500); // ì• ë‹ˆë©”ì´ì…˜ ì§€ì† ì‹œê°„ í›„ ì‚­ì œ
            }
        }
    
        function handleImageError(imgElement, productId) {
            console.warn(`ğŸš¨ [handleImageError] ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨, ê¸°ë³¸ ì´ë¯¸ì§€ë¡œ ë³€ê²½ â†’ ì œí’ˆ ID: ${productId}`);
            imgElement.src = "https://rahulindesign.websites.co.in/twenty-nineteen/img/defaults/product-default.png";
        }
    
        function searchByHistory(productId) {
            // ìŠ¤ìœ„ì¹˜ ìƒíƒœì™€ ê´€ê³„ì—†ì´ ì œí’ˆ ê²€ìƒ‰ ë¡œì§ ì‹¤í–‰
            document.getElementById("header-search-id").value = productId;
            
            // ì œí’ˆ IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„¸ í˜ì´ì§€ë¡œ ë°”ë¡œ ì´ë™
            console.log(`ğŸ” [searchByHistory] ê²€ìƒ‰ ê¸°ë¡ì—ì„œ ì œí’ˆ í´ë¦­: ${productId}`);
            storeSearchedProduct({ product_id: productId });
            window.location.href = `/strength-weakness.html?product_id=${productId}`;
        }
    
        async function fetchAnalysis() {
            const productId = document.getElementById("product-id").value.trim();
            if (!productId) {
                alert("âŒ ì œí’ˆ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
                return;
            }
    
            console.log(`ğŸ“¡ [fetchAnalysis] ìš”ì²­: /api/strength-weakness/${productId}`);
    
            try {
                const response = await fetch(`/api/strength-weakness/${productId}`);
    
                console.log(`ğŸ“¡ [fetchAnalysis] ì‘ë‹µ ìƒíƒœ ì½”ë“œ: ${response.status}`);
    
                if (!response.ok) {
                    console.error("ğŸš¨ [fetchAnalysis] ì„œë²„ ì˜¤ë¥˜ ë°œìƒ! ìƒíƒœ ì½”ë“œ:", response.status);
                    alert("âš ï¸ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                    return;
                }
    
                const data = await response.json();
                console.log("ğŸ“¡ [fetchAnalysis] API ì‘ë‹µ ë°ì´í„°:", JSON.stringify(data, null, 2));
    
                if (!data || Object.keys(data).length === 0) {
                    alert("âš ï¸ í•´ë‹¹ ì œí’ˆì˜ ë¶„ì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
                    return;
                }
    
                console.log("ğŸ“¡ [fetchAnalysis] API ì‘ë‹µ ë°ì´í„° (product):", data.product);
    
                // âœ… **ì´ë¯¸ì§€ URLì´ ì‚¬ë¼ì§€ëŠ” ë²„ê·¸ ìˆ˜ì •**
                let fixedProductData = {
                    product_id: data.product.product_id || productId,  // ì œí’ˆ ID
                    product_name: data.product.product_name || "ì•Œ ìˆ˜ ì—†ìŒ",  // ì œí’ˆëª…
                    image_url: data.product.image_url || "",  // **ì´ë¯¸ì§€ URL ê·¸ëŒ€ë¡œ ìœ ì§€**
                };
    
                storeSearchedProduct(fixedProductData);  // âœ… ê°•ì œ ì ìš©!
    
                // âœ… ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€
                updateGauge("overall-score-fill", "overall-score-eval", "overall-score-text", data.overall_score);
                displayResults(data);
                displayProductInfo(data.product);
                applyAutoFilters(data);
    
                // âœ… ìƒˆë¡œìš´ ê¸°ëŠ¥: ë¶„ì„ ìš”ì•½ ì¶”ê°€
                updateCommentBox(data);
    
                // âœ… ë¦¬ë·° íŠ¸ë Œë“œ ë°ì´í„° ì¶”ê°€ í˜¸ì¶œ (ê¸°ì¡´ ìœ ì§€)
                fetchReviewTrend(productId);
    
                // âœ… ê´€ë ¨ ë¦¬ë·° ë¶ˆëŸ¬ì˜¤ê¸° (ê¸°ì¡´ ìœ ì§€)
                fetchRelatedReviews(productId);
    
                // âœ… ì‚¬ì´ì¦ˆ ë¶„ì„ ì¶”ê°€ í˜¸ì¶œ (ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€)
                await fetchSizeAnalysis(productId);
    
            } catch (error) {
                console.error("ğŸ”¥ [fetchAnalysis] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜:", error);
                alert("ğŸš¨ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ! ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            }
        }
    
        window.onload = function () {
            updateSearchHistory();
            let productId = getQueryParam("id");
        
            if (productId) {
                document.getElementById("product-id").value = productId;
        
                // âœ… ì´ë¯¸ ê°€ì ¸ì˜¨ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ìºì‹œëœ ë°ì´í„°ë¥¼ í™œìš©
                if (sessionStorage.getItem(`product_${productId}`)) {
                    console.log("âœ… ìºì‹œëœ ë°ì´í„° ì‚¬ìš©");
                    displayResults(JSON.parse(sessionStorage.getItem(`product_${productId}`)));
                } else {
                    fetchAnalysis();  // ğŸš€ ì„œë²„ ìš”ì²­ (í•„ìš”í•œ ê²½ìš°ì—ë§Œ)
                }
            }
        };
        

        let currentActive = null;

        
        
        document.addEventListener("DOMContentLoaded", function () {
            const switchInput = document.getElementById("search-mode-switch");
            const searchInput = document.getElementById("header-search-id");
            const creditCost = document.querySelector(".credit-cost");
            const currentPage = window.location.pathname;
        
            function updateSearchMode() {
                if (switchInput.checked) {
                    searchInput.placeholder = "ì œí’ˆ ID ë˜ëŠ” ì œí’ˆëª… ì…ë ¥";
                    creditCost.innerHTML = "ğŸ’° 100";
                } else {
                    searchInput.placeholder = "ì‡¼í•‘ëª°ì˜ ì£¼ì†Œë¥¼ ì…ë ¥";
                    creditCost.innerHTML = "ğŸ’° 500";
                }
            }
        
            if (currentPage.includes("index.html")) {
                switchInput.checked = false;
            } else if (currentPage.includes("strength-weakness.html")) {
                switchInput.checked = true;
            }
        
            updateSearchMode();
            switchInput.addEventListener("change", updateSearchMode);
        
            updateSearchHistory();
            let productId = getQueryParam("id");
        
            if (productId) {
                document.getElementById("header-search-id").value = productId;
                if (sessionStorage.getItem(`product_${productId}`)) {
                    console.log("âœ… ìºì‹œëœ ë°ì´í„° ì‚¬ìš©");
                    displayResults(JSON.parse(sessionStorage.getItem(`product_${productId}`)));
                } else {
                    fetchAnalysis();
                }
            }
        });
        
        function transitionToPage(url, direction) {
            let transitionDiv = document.createElement("div");
            transitionDiv.classList.add("page-transition");
        
            if (direction === "right") {
                transitionDiv.classList.add("slide-out-right"); // ğŸ‘‰ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™
            } else {
                transitionDiv.classList.add("slide-out-left"); // ğŸ‘‰ ì™¼ìª½ìœ¼ë¡œ ì´ë™
            }
        
            document.body.appendChild(transitionDiv);
        
            setTimeout(() => {
                window.location.href = url;
            }, 2500);  // ğŸ”¥ 1.2ì´ˆ í›„ í˜ì´ì§€ ì´ë™ (ì´ì „ë³´ë‹¤ ëŠë¦¬ê²Œ)
        }
        
        // âœ… ë©”ì¸ í˜ì´ì§€ â†’ ê°•ì•½ì  í˜ì´ì§€ (ì˜¤ë¥¸ìª½ ì´ë™)
        function goToStrengthWeakness(productId) {
            transitionToPage(`/strength-weakness.html?product_id=${productId}`, "right");
        }
        
        // âœ… ê°•ì•½ì  í˜ì´ì§€ â†’ ë©”ì¸ í˜ì´ì§€ (ì™¼ìª½ ì´ë™)
        function goToMain() {
            transitionToPage(`/index.html`, "left");
        }

        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(() => {
                document.getElementById("loading-overlay").classList.add("fade-out");
            }, 2000); // â³ 1.2ì´ˆ í›„ ë¡œë”© í™”ë©´ ì œê±° (í˜ì´ì§€ ë¡œë”© ì‹œê°„ì— ë”°ë¼ ì¡°ì ˆ ê°€ëŠ¥)
        });
        
        
        function toggleSection(contentId, button) {
            let expandBox = document.getElementById("header-expand");
            let contentBox = document.getElementById(contentId);
            let arrow = button.querySelector(".arrow");
        
            if (currentActive === contentId) {
                // ğŸ”¥ ì°½ì„ ë‹«ì„ ë•Œ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
                expandBox.classList.add("closing"); 
                arrow.textContent = "â–¼"; // ì•„ì´ì½˜ ë³€ê²½
                setTimeout(() => {
                    expandBox.classList.remove("expand-active", "closing"); // ë‹«ê¸°
                    contentBox.style.display = "none";
                }, 300);
                currentActive = null;
            } else {
                document.querySelectorAll(".header-content").forEach(el => el.style.display = "none");
                document.querySelectorAll(".arrow").forEach(el => el.textContent = "â–¼");
        
                contentBox.style.display = "block";
                arrow.textContent = "â–²"; // ì•„ì´ì½˜ ë³€ê²½
                setTimeout(() => {
                    expandBox.classList.add("expand-active");
                }, 50);
        
                currentActive = contentId;
            }
        }
        

        document.addEventListener("click", function(event) {
            let expandBox = document.getElementById("header-expand");
            let header = document.getElementById("header");
        
            if (currentActive && !expandBox.contains(event.target) && !header.contains(event.target)) {
                expandBox.classList.add("closing"); 
                
                // ğŸ”¥ ëª¨ë“  ë©”ë‰´ í™”ì‚´í‘œ â–¼ë¡œ ë³€ê²½
                document.querySelectorAll(".arrow").forEach(el => el.textContent = "â–¼");
        
                setTimeout(() => {
                    expandBox.classList.remove("expand-active", "closing");
                    document.querySelectorAll(".header-content").forEach(el => el.style.display = "none");
                }, 300);
                currentActive = null;
            }
        });
        async function fetchSuggestions(query) {
            const suggestionsBox = document.getElementById("search-suggestions");
            suggestionsBox.innerHTML = ""; // ê¸°ì¡´ ì¶”ì²œ ëª©ë¡ ì´ˆê¸°í™”
            suggestionsBox.style.display = "none"; // ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€
        
            if (!query || query.length < 2) return; // 2ê¸€ì ë¯¸ë§Œì´ë©´ ì¶”ì²œ ì•ˆ í•¨
        
            try {
                const response = await fetch(`/api/suggest-products/${encodeURIComponent(query)}`);
                const suggestions = await response.json();
        
                if (suggestions.length > 0) {
                    // ìµœëŒ€ 5ê°œë¡œ ì œí•œ
                    const limitedSuggestions = suggestions.slice(0, 5);
                    suggestionsBox.style.display = "block"; // ì¶”ì²œ ëª©ë¡ í‘œì‹œ
                    limitedSuggestions.forEach(item => {
                        const suggestionItem = document.createElement("div");
                        // ìƒí’ˆëª…ì´ 20ì ì´ìƒì´ë©´ ìë¥´ê³  "..." ì¶”ê°€
                        const displayName = item.product_name.length > 20 
                            ? item.product_name.substring(0, 20) + "..." 
                            : item.product_name;
                        suggestionItem.textContent = displayName;
                        suggestionItem.onclick = () => {
                            document.getElementById("header-search-id").value = item.product_name; // ì‹¤ì œ ê°’ì€ ì „ì²´ ìƒí’ˆëª… ì‚¬ìš©
                            suggestionsBox.style.display = "none"; // ì„ íƒ ì‹œ ì¶”ì²œ ëª©ë¡ ìˆ¨ê¹€
                            searchFromHeader(); // ê²€ìƒ‰ ì‹¤í–‰
                        };
                        suggestionsBox.appendChild(suggestionItem);
                    });
                }
            } catch (error) {
                console.error("ğŸ”¥ [fetchSuggestions] ì¶”ì²œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:", error);
            }
        }
        
        // ê²€ìƒ‰ì°½ ì…ë ¥ ì‹œ ì¶”ì²œ ëª©ë¡ ì—…ë°ì´íŠ¸
        document.getElementById("header-search-id").addEventListener("input", function () {
            const query = this.value.trim();
            fetchSuggestions(query);
        });
        
        // ì¶”ì²œ ëª©ë¡ ì™¸ë¶€ í´ë¦­ ì‹œ ìˆ¨ê¹€
        document.addEventListener("click", function (event) {
            const suggestionsBox = document.getElementById("search-suggestions");
            const searchInput = document.getElementById("header-search-id");
            if (!searchInput.contains(event.target) && !suggestionsBox.contains(event.target)) {
                suggestionsBox.style.display = "none";
            }
        });

        async function searchFromHeader() {
            const input = document.getElementById("header-search-id").value.trim();
            const switchInput = document.getElementById("search-mode-switch");
            const searchMode = switchInput.checked ? "product" : "mall";
        
            if (!input) {
                alert("âŒ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
                return;
            }
        
            console.log(`ğŸ” [searchFromHeader] ê²€ìƒ‰ ìš”ì²­: ${input}, ëª¨ë“œ: ${searchMode}`);
        
            if (searchMode === "product") {
                if (/^\d+$/.test(input)) {
                    storeSearchedProduct({ product_id: input });
                    window.location.href = `/strength-weakness.html?product_id=${input}`;
                    return;
                }
        
                try {
                    const response = await fetch(`/api/get-product-id/${encodeURIComponent(input)}`);
                    if (!response.ok) {
                        alert("âš ï¸ í•´ë‹¹ ì œí’ˆì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                        return;
                    }
        
                    const data = await response.json();
                    const productId = data.product_id;
        
                    storeSearchedProduct({ product_id: productId });
                    window.location.href = `/strength-weakness.html?product_id=${productId}`;
                } catch (error) {
                    console.error("ğŸ”¥ [searchFromHeader] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜:", error);
                    alert("ğŸš¨ ì„œë²„ ì˜¤ë¥˜ ë°œìƒ! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                }
            } else {
                try {
                    const response = await fetch(`/api/search-mall/${encodeURIComponent(input)}`);
                    if (!response.ok) {
                        alert("âš ï¸ í•´ë‹¹ ì‡¼í•‘ëª°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                        return;
                    }
        
                    const data = await response.json();
                    console.log(`ğŸ“¡ [searchFromHeader] ì‡¼í•‘ëª° ê²€ìƒ‰ ê²°ê³¼:`, data);
                    window.location.href = `/mall-search.html?mall_name=${encodeURIComponent(input)}`;
                } catch (error) {
                    console.error("ğŸ”¥ [searchFromHeader] ì‡¼í•‘ëª° ê²€ìƒ‰ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜:", error);
                    alert("ğŸš¨ ì„œë²„ ì˜¤ë¥˜ ë°œìƒ! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                }
            }
        }
        // ##############################################################################
    //     // âœ… ì „ì—­ ë³€ìˆ˜ ì¤‘ë³µ ì„ ì–¸ ë°©ì§€
    // if (typeof window.socket === "undefined") {
    //     window.socket = null;
    // }

    // if (typeof window.lastReceivedReviewId === "undefined") {
    //     window.lastReceivedReviewId = null;
    // }

    // function connectWebSocket() {
    //     if (window.socket && window.socket.readyState !== WebSocket.CLOSED) {
    //         console.log("âš ï¸ WebSocketì´ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤. ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€");
    //         return;
    //     }

    //     console.log("ğŸ“¡ WebSocket ì—°ê²° ì‹œë„...");
    //     window.socket = new WebSocket(`ws://${window.location.host}/ws`);

    //     window.socket.onopen = () => {
    //         console.log("âœ… WebSocket ì—°ê²° ì„±ê³µ!");
    //     };

    //     window.socket.onmessage = (event) => {
    //         try {
    //             console.log("ğŸ“© WebSocket ë©”ì‹œì§€ ìˆ˜ì‹ :", event.data);
    //             const data = JSON.parse(event.data);

    //             if (data.alert && data.review) {
    //                 if (window.lastReceivedReviewId === data.review.review_id) {
    //                     console.warn(`âš ï¸ ì¤‘ë³µëœ ì•Œë¦¼ ë¬´ì‹œ: ${data.review.review_id}`);
    //                     return;
    //                 }
    //                 window.lastReceivedReviewId = data.review.review_id;
    //                 showNotification(data.alert, data.review);
    //             }
    //         } catch (error) {
    //             console.error("ğŸš¨ WebSocket ë©”ì‹œì§€ ì²˜ë¦¬ ì˜¤ë¥˜:", error);
    //         }
    //     };

    //     window.socket.onclose = () => {
    //         console.warn("âš ï¸ WebSocket ì—°ê²° ì¢…ë£Œë¨. 5ì´ˆ í›„ ì¬ì—°ê²° ì‹œë„...");
    //         setTimeout(connectWebSocket, 5000);
    //     };

    //     window.socket.onerror = (error) => {
    //         console.error("ğŸš¨ WebSocket ì˜¤ë¥˜ ë°œìƒ:", error);
    //         window.socket.close();
    //     };
    // }

    // function showNotification(message, review) {
    //     const notificationContainer = document.getElementById("notification-items");
    //     const notificationItem = document.createElement("li");

    //     notificationItem.innerHTML = `
    //         <strong>${message}</strong> <br>
    //         <span style="font-size:14px; color:gray;">ğŸ“¢ ${review.category} - â­ ${review.rating}</span> <br>
    //         <span>${review.sentence}</span>
    //     `;

    //     notificationContainer.prepend(notificationItem);
    //     updateNotificationBadge();
    // }

    // function updateNotificationBadge() {
    //     const count = document.querySelectorAll("#notification-items li").length;
    //     document.getElementById("notification-count").innerText = count > 0 ? count : "";
    // }

    // function toggleNotificationList() {
    //     const notificationDropdown = document.getElementById("notification-list");
    //     notificationDropdown.style.display = notificationDropdown.style.display === "block" ? "none" : "block";
    // }

    // function clearNotifications() {
    //     document.getElementById("notification-items").innerHTML = "";
    //     updateNotificationBadge();
    // }

    // document.addEventListener("DOMContentLoaded", () => {
    //     connectWebSocket();
    // });
        
        


    </script>
    
    
    

</body>
</html>
